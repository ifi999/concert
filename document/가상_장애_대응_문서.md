# 장애 회고

## 현상
- 콘서트 예약 서비스의 예약 API가 응답을 하지 않음으로 인해, 사용자가 좌석을 예약할 수 없는 상황이 발생

## 원인
- 예약 API가 동시 접속 처리 중 DB Lock 문제로 인해 응답이 지연되거나 실패
- 이로 인해 트랜잭션이 대기 상태로 쌓이면서 전체 API 응답이 지연되었고, 일부 요청은 타임아웃 발생

## 발생 시간
- 20xx년 x월 xx일 14:00

## 인지 시간
- 20xx년 x월 xx일 15:05

## 장애 처리 시간
- 20xx년 x월 xx일 15:30

## MTTD
- 65분

## MTTR
- 25분

## Impact
- 수천 명의 사용자가 콘서트 좌석 예약 시도를 했으나 실패
- 예약 실패로 인해 사용자 불만이 급증하고, SNS에서 서비스에 대한 부정적인 피드백 확산
- 약 2천 건의 예약 요청이 처리되지 못해, 회사 매출에 약 1억 원의 손실 발생

## 장애 재발 방지 정책

### Short-term
- 장애 모니터링 시스템 강화
  - 주요 API의 응답 시간과 DB 현황을 실시간으로 모니터링할 수 있는 알림 시스템을 추가로 설정하여, 문제 발생 시 신속하게 대응할 수 있도록 개선

### Mid-term
- DB 성능 최적화
  - 예약 API와 관련된 쿼리 최적화 작업을 수행하고, 이슈가 된 문제를 최소화하기 위한 인덱스 재구성 및 트랜잭션 관리 개선 작업을 진행
- 트랜잭션 분리
  - 동시성 처리가 필요한 트랜잭션을 별도로 분리하여, 주요 기능에 대한 처리 지연을 최소화

### Long-term
- 분산 처리 구조 도입
  - 예약 시스템을 마이크로 서비스로 분리하고, 트래픽을 분산 처리할 수 있는 구조로 전환하여 동시성 처리 능력을 대폭 강화
- 오토스케일링 도입
  - 트래픽 급증 시 자동으로 인프라를 확장할 수 있도록 클라우드 기반의 오토스케일링 기능을 도입하여, 대규모 이벤트나 피크 타임에도 안정적으로 서비스를 제공
